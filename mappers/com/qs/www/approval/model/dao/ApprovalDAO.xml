<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ApprovalDAO">

	<resultMap
		type="com.qs.www.approval.model.dto.ApprovalLineDTO"
		id="approvalLineResultMap">
		<result property="lineNo" column="LINE_NO" />
		<result property="lineName" column="LINE_NAME" />
		<result property="workType" column="WORK_TYPE" />
		<result property="memberNo" column="MEMBER_NO" />
	</resultMap>
	<resultMap type="com.qs.www.approval.model.dto.ApproverDTO"
		id="approverResultMap">
		<result property="memberNo" column="MEMBER_NO" />
		<result property="lineNo" column="LINE_NO" />
		<result property="ApproverName" column="APPROVER_NAME" />
		<result property="ApproverType" column="APPROVER_TYPE" />
		<result property="priority" column="PRIORITY" />
	</resultMap>
	<resultMap type="com.qs.www.schedule.model.dto.ReportDTO"
		id="reportResultMap">
		<result property="reportNo" column="REPORT_NO" />
		<result property="reportDate" column="REPORT_DATE" />
		<result property="memberNo" column="MEMBER_NO" />
		<result property="documentNo" column="DOCUMENT_NO" />
		<result property="reportNote" column="REPORT_NOTE" />
		<result property="reportStatus" column="REPORT_STATUS" />
		<result property="lineName" column="LINE_NAME" />
		<result property="reportTitle" column="REPORT_TITLE" />
	</resultMap>
	<resultMap type="com.qs.www.schedule.model.dto.WorkingDocumentItemDTO"
		id="reportItemResultMap">
		<result property="reportNo" column="REPORT_NO" />
		<result property="documentNo" column="DOCUMENT_NO" />
		<result property="priority" column="PRIORITY" />
		<result property="itemContent" column="ITEM_CONTENT" />
	</resultMap>
	
	<select id="selectApprovalLine"
		resultMap="approvalLineResultMap">
		SELECT /*
		com.qs.www.approval.model.dao.ApprovalDAO#selectApprovalLine()*/
		A.*
		FROM TBL_APPROVER_LINE A
		WHERE A.MEMBER_NO = #{ no }
	</select>
	<select id="selectApprover" resultMap="approverResultMap">
		SELECT /*
		com.qs.www.approval.model.dao.ApprovalDAO#selectApprovalLine()*/
		A.*
		FROM TBL_APPROVER A
		WHERE A.LINE_NO = #{ lineNo }
	</select>

	<select id="selectReportNum" resultType="_int">
		SELECT
		       LAST_NUMBER
		  FROM USER_SEQUENCES
		 WHERE SEQUENCE_NAME = 'SEQ_REPORT_NO'
	</select>
	<select id="selectMyReport"
		resultMap="reportResultMap">
		SELECT /*
		com.qs.www.approval.model.dao.ApprovalDAO#selectMyReport()*/
		A.*
		FROM TBL_REPORT A
		WHERE A.MEMBER_NO = #{ no }
		  AND 4 > A.DOCUMENT_NO
	</select>
	<select id="selectOneReportDetail"
		resultMap="reportResultMap">
		SELECT /*
		com.qs.www.approval.model.dao.ApprovalDAO#selectOneReportDetail()*/
		A.*
		FROM TBL_REPORT A
		WHERE A.REPORT_NO = #{ no }
	</select>
	<select id="selectReportItemList"
		resultMap="reportItemResultMap">
		SELECT /*
		com.qs.www.approval.model.dao.ApprovalDAO#selectOneReportDetail()*/
		A.*
		FROM TBL_ITEM_CONTENT A
		WHERE A.REPORT_NO = #{ no }
	</select>
</mapper>
	    