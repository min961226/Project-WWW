<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ContactDAO">
	<resultMap type="com.qs.www.mypage.model.dto.ContactDTO" id="contactResultMap">
		<id property="code" column="DEPT_CODE"/>
		<result property="name" column="DEPT_NAME"/>
		<result property="number" column="DEPT_CALL_NUMBER"/>
		
	</resultMap>
	
	<select id="selectAllContactList" resultMap="contactResultMap">
        SELECT /* com.qs.www.mypage.model.dao.ContactDAO#selectAllContactList() */
               A.DEPT_CODE
             , A.DEPT_NAME
             , A.DEPT_CALL_NUMBER
         	FROM TBL_DEPARTMENT A
	</select>
	
	<select id="selectBoardList" resultMap="contactResultMap">
         SELECT 
                C.RNUM
        	  , C.DEPT_NAME
              , C.DEPT_CALL_NUMBER
              , C.DEPT_CODE
          FROM (SELECT ROWNUM RNUM
          			 , B.DEPT_NAME
                     , B.DEPT_CALL_NUMBER
		             , B.DEPT_CODE
                  FROM (SELECT A.DEPT_NAME
             				 , A.DEPT_CALL_NUMBER
				             , A.DEPT_CODE
                           FROM TBL_DEPARTMENT A
    					<where>
							<if test="searchCondition == 'code'">
	           				    A.DEPT_CODE LIKE '%' || #{ searchValue } || '%'	
							</if>
							<if test="searchCondition == 'name'">
	           				   A.DEPT_NAME LIKE '%' || #{ searchValue } || '%' 	
							</if>
							<if test="searchCondition == 'number'">
	           				   A.DEPT_CALL_NUMBER LIKE '%' || #{ searchValue } || '%' 	
							</if>
    					</where>
                         ORDER BY A.DEPT_CODE DESC
                        ) B
                  <![CDATA[
                  WHERE ROWNUM <= #{ endRow }
                  ]]>
               ) C
         WHERE C.RNUM >= #{ startRow }     
	</select>
	

	
		<select id="selectAllCount" resultType="_int" parameterType="hashmap">
        SELECT /* com.qs.www.mypage.model.dao.ContactDAO#selectAllCount() */
               COUNT(*)
          FROM TBL_DEPARTMENT A
    	<where>
			<if test="searchCondition == 'code'">
	           A.DEPT_CODE LIKE '%' || #{ searchValue } || '%'	
			</if>
			<if test="searchCondition == 'name'">
	           A.DEPT_NAME LIKE '%' || #{ searchValue } || '%' 	
			</if>
			<if test="searchCondition == 'number'">
	           A.A.DEPT_CALL_NUMBER LIKE '%' || #{ searchValue } || '%' 	
			</if>

            
    	</where>
	</select>
	

	
</mapper>