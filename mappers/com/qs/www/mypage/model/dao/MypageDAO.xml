<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MypageDAO">

	<select id="selectQuestionList" resultType="java.lang.String">
        SELECT /* com.qs.www.mypage.model.dao.MypageDAO#selectQuestionList() */
               A.QUESTION_BODY
          FROM TBL_CHECK_QUESTION A
	</select>

	<update id="updateInfo" parameterType="com.qs.www.member.model.dto.MemberInfoDTO">
        UPDATE /* com.qs.www.mypage.model.dao.MypageDAO#updateInfo() */
               TBL_MEMBER A
           SET A.GENDER = #{ gender }
             , A.BIRTHDAY = #{ birthday }
             , A.RRN = #{ rrn }
             , A.PHONE = #{ phone }
             , A.ADDRESS = #{ address }
             , A.QUESTION_ANSWER = #{ questionAnswer }
             , A.QUESTION_CODE = (SELECT B.QUESTION_CODE
                                    FROM TBL_CHECK_QUESTION B
                                   WHERE B.QUESTION_BODY = #{ checkQuestion.questionBody })
         WHERE A.MEMBER_NO = #{ memberNo }
	</update>
	
	<select id="selectCommuteInTime" parameterType="com.qs.www.mypage.model.dto.CommutingLogDTO" resultType="java.lang.String">
        SELECT /* com.qs.www.mypage.model.dao.MypageDAO#selectCommuteInTime() */
               A.IN_TIME
          FROM TBL_COMMUTE A
         WHERE A.YEAR_MONTH = #{ yearMonth }
           AND A.DAY = #{ day }
           AND A.MEMBER_NO = #{ memberNo }
	</select>
	
	<select id="selectCommuteOutTime" parameterType="com.qs.www.mypage.model.dto.CommutingLogDTO" resultType="java.lang.String">
        SELECT /* com.qs.www.mypage.model.dao.MypageDAO#selectCommuteOutTime() */
               A.OUT_TIME
          FROM TBL_COMMUTE A
         WHERE A.YEAR_MONTH = #{ yearMonth }
           AND A.DAY = #{ day }
           AND A.MEMBER_NO = #{ memberNo }
	</select>
	
	<insert id="insertCommute" parameterType="com.qs.www.mypage.model.dto.CommutingLogDTO">
        INSERT /* com.qs.www.mypage.model.dao.MypageDAO#insertCommute() */
          INTO TBL_COMMUTE A
        (
          A.COMMUTE_NO
        , A.MEMBER_NO
        , A.YEAR_MONTH
        , A.DAY
		<if test="inTime != null">
        , A.IN_TIME
		</if>
		<if test="outTime != null">
        , A.OUT_TIME
		</if>
        )
        VALUES
        (
          SEQ_COMMUTE_NO.NEXTVAL
        , #{ memberNo }
        , #{ yearMonth }
        , #{ day }
		<if test="inTime != null">
        , #{ inTime }
		</if>
		<if test="outTime != null">
        , #{ outTime }
		</if>
        )
	</insert>
	
	<update id="updateCommute" parameterType="com.qs.www.mypage.model.dto.CommutingLogDTO">
        UPDATE /* com.qs.www.mypage.model.dao.MypageDAO#updateCommute() */
               TBL_COMMUTE A
           SET A.OUT_TIME = #{ outTime }
         WHERE A.YEAR_MONTH = #{ yearMonth }
           AND A.DAY = #{ day }
           AND A.MEMBER_NO = #{ memberNo }
	</update>
</mapper>