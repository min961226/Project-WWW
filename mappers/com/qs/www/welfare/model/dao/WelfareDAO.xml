<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WelfareDAO">


	<resultMap type="com.qs.www.welfare.model.dto.WelfareListDTO" id="welfareResultMap">
		<result property="reportNo" column="REPORT_NO" />
		<result property="memberNo" column="MEMBER_NO" />
		<result property="reportNote" column="REPORT_NOTE" />
		<result property="documentNo" column="DOCUMENT_NO" />
		<result property="selfDevName" column="DEVELOPMENT_TYPE_NAME" />
		<result property="welfareTitle" column="DOCUMENT_NAME" />
		<result property="selfDevDate" column="ITEM_NAME" />
		<result property="lineName" column="LINE_NAME" />
		<result property="priority" column="PRIORITHY" />

	</resultMap>

<select id="selectWelfareList" resultType="java.lang.String">
	SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#checkWelfareList()*/
		   DOCUMENT_NAME
	  FROM TBL_DOCUMENT_FORM
	 WHERE CATEGORY_CODE = 'C2'
       AND DOCUMENT_NAME LIKE '%신청서'
	   AND USE_YN = 'Y'
</select>


<select id="checkSelfDevList" resultType="java.lang.String">
	SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#checkSelfDevList()*/
		   DEVELOPMENT_TYPE_NAME
	  FROM TBL_SELF_DEVELOPMENT
</select>

<select id="selectApproverLine" resultType="java.lang.String">
	SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#selectApproverLine()*/
		   APPROVER_NAME
	  FROM TBL_APPROVER
	 WHERE MEMBER_NO = #{ memberNo }
</select>

<insert id="insertSelfDevelopment" parameterType="com.qs.www.welfare.model.dto.WelfareListDTO">

	INSERT /* com.qs.www.welfare.model.dao.WelfareDAO#insertSelfDevelopment() */
	  INTO TBL_REPORT A
	(
	  A.REPORT_NO
	, A.REPORT_DATE
	, A.MEMBER_NO
	, A.DOCUMENT_NO
	, A.REPORT_NOTE
	, A.REPORT_STATUS
	, A.LINE_NAME
	, A.REPORT_TITLE
	)
	VALUES
	(
	  SEQ_REPORT_NO.NEXTVAL
	, SYSDATE
	, #{ memberNo }
	, #{ documentNo }
	, #{ reportNote }
	, DEFAULT
	, #{ lineName }
	, #{ welfareTitle }
	)
	</insert>
	
	<select id="selectReportNum" resultType="_int">
		SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#selectReportNum() */
		       LAST_NUMBER
		  FROM USER_SEQUENCES
		 WHERE SEQUENCE_NAME = 'SEQ_REPORT_NO'
	</select>
	
	<select id="selectDevNo" resultType="_int">
		SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#selectDevNo() */
		       DEVELOPMENT_NO
		  FROM TBL_SELF_DEVELOPMENT
		 WHERE DEVELOPMENT_TYPE_NAME = #{ lineName }
	</select>
	
	<select id="selectLimitCost" resultType="_int">
		SELECT /* com.qs.www.welfare.model.dao.WelfareDAO#selectLimitCost() */
			   MONTH_LIMIT_COST
		  FROM TBL_SELF_DEVELOPMENT
		 WHERE DEVELOPMENT_NO = #{ developmentNo }
	</select>
	
	
	
</mapper>